-- Tabela de produtos
CREATE TABLE IF NOT EXISTS produtos (
    id SERIAL PRIMARY KEY,
    nome VARCHAR(255) NOT NULL,
    descricao TEXT,
    preco DECIMAL(10,2) NOT NULL,
    imagem_url TEXT,
    ativo BOOLEAN DEFAULT true,
    data_criacao TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Tabela de doações
CREATE TABLE IF NOT EXISTS doacoes (
    id SERIAL PRIMARY KEY,
    nome_doador VARCHAR(255) NOT NULL,
    email_doador VARCHAR(255) NOT NULL,
    telefone_doador VARCHAR(20),
    produto VARCHAR(255),
    valor DECIMAL(10,2) NOT NULL,
    mensagem TEXT,
    metodo_pagamento VARCHAR(50) NOT NULL,
    status VARCHAR(50) DEFAULT 'pendente',
    data_criacao TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Políticas RLS simples (desative RLS temporariamente se necessário)
ALTER TABLE produtos ENABLE ROW LEVEL SECURITY;
ALTER TABLE doacoes ENABLE ROW LEVEL SECURITY;

-- Políticas mais permissivas para teste
CREATE POLICY "Permitir tudo em produtos" ON produtos
    FOR ALL USING (true);

CREATE POLICY "Permitir tudo em doacoes" ON doacoes
    FOR ALL USING (true);
